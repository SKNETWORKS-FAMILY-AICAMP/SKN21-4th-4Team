<!--
================================================================================
ğŸ“š Bootcamp AI Tutor - í€´ì¦ˆ í˜ì´ì§€ (3ë‹¨ ë ˆì´ì•„ì›ƒ)
================================================================================
ì‘ì„±ì¼: 2026-01-29
ì„¤ëª…: Chat í˜ì´ì§€ì™€ ë™ì¼í•œ 3ë‹¨ êµ¬ì¡°ì˜ í€´ì¦ˆ í˜ì´ì§€
================================================================================
-->
{% load static %}
<!DOCTYPE html>
<html lang="ko">

<head>
    <!-- ê¸°ë³¸ ë©”íƒ€ íƒœê·¸ -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bootcamp AI Tutor - Quiz</title>

    <!-- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- ì •ì  CSS íŒŒì¼ ì—°ê²° -->
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
</head>

<body>
    <!-- ========================================
    ğŸ“Œ ì¢Œì¸¡ ì‚¬ì´ë“œë°”
    ======================================== -->
    <aside class="sidebar">
        <!-- í—¤ë”: ë¡œê³  + í…Œë§ˆ í† ê¸€ -->
        <div class="sidebar-header">
            <div class="brand">
                <div class="brand-icon">ğŸ¥§</div>
                <span class="brand-text">Py_Mate</span>
            </div>
            <!-- ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ í† ê¸€ ë²„íŠ¼ -->
            <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Dark Mode">
                <svg id="themeIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5" />
                    <path
                        d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
                </svg>
            </button>
        </div>

        <!-- í€´ì¦ˆ ì„¤ì • -->
        <div class="sidebar-section">
            <h3 class="section-title">ğŸ¯ í€´ì¦ˆ ì„¤ì •</h3>
            <div class="filter-list">
                <label class="filter-item">
                    <span>ì¹´í…Œê³ ë¦¬:</span>
                </label>
                <select id="categorySelect" class="quiz-select">
                    <option value="all">ì „ì²´</option>
                    <option value="python">Python</option>
                    <option value="lecture">ê°•ì˜ë…¸íŠ¸</option>
                </select>

                <label class="filter-item" style="margin-top: 12px;">
                    <span>ì¶œì œ ê°œìˆ˜:</span>
                </label>
                <input type="number" id="quizCount" min="1" max="20" value="5" class="quiz-input">

                <button class="start-quiz-btn" onclick="loadQuizzes()">ğŸš€ í€´ì¦ˆ ì‹œì‘</button>
            </div>
        </div>

        <!-- í€´ì¦ˆ ì§„í–‰ ìƒí™© -->
        <div class="sidebar-section">
            <h3 class="section-title">ğŸ“Š ì§„í–‰ ìƒí™©</h3>
            <div class="stats-container">
                <div class="stat-item">
                    <span class="stat-label">í˜„ì¬ ë¬¸ì œ</span>
                    <span class="stat-value" id="currentQuestion">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ì •ë‹µ ìˆ˜</span>
                    <span class="stat-value" id="correctCount">0</span>
                </div>
            </div>
        </div>


    </aside>

    <!-- ========================================
    ğŸ“Œ ì¤‘ì•™ ë©”ì¸ ì½˜í…ì¸  ì˜ì—­
    ======================================== -->
    <main class="main-content">
        <!-- ìƒë‹¨ í—¤ë”: í˜ì´ì§€ ì œëª© + ìœ ì € ì•¡ì…˜ -->
        <div class="mode-toggle-container">
            <div class="mode-toggle">
                <span class="mode-btn active" style="cursor: default;">ğŸ§© Quiz Mode</span>
            </div>

            <!-- ìœ ì € ì•¡ì…˜ (ë§ˆì´í˜ì´ì§€/ë¡œê·¸ì•„ì›ƒ) -->
            {% if user.is_authenticated %}
            <div class="header-user-actions">
                <span class="header-user-name">ğŸ‘¤ {{ user.username }}</span>
                <a href="{% url 'mypage' %}" class="header-user-btn">ë§ˆì´í˜ì´ì§€</a>
                <a href="{% url 'logout' %}" class="header-user-btn">ë¡œê·¸ì•„ì›ƒ</a>
            </div>
            {% else %}
            <div class="header-user-actions">
                <a href="{% url 'login' %}" class="header-user-btn primary">ë¡œê·¸ì¸</a>
                <a href="{% url 'signup' %}" class="header-user-btn">íšŒì›ê°€ì…</a>
            </div>
            {% endif %}
        </div>

        <!-- í€´ì¦ˆ ì˜ì—­ -->
        <div class="chat-area" id="quizArea">
            <div class="chat-content" id="quizContent">
                <!-- ì›°ì»´ í™”ë©´ -->
                <div class="welcome" id="quizWelcome">
                    <img src="/image/pymate_logo.png" alt="PyMate"
                        style="width: 120px; height: auto; margin-bottom: 20px; border-radius: 16px;">
                    <h1>í€´ì¦ˆì— ë„ì „í•˜ì„¸ìš”! ğŸ§©</h1>
                    <p>ë¶€íŠ¸ìº í”„ í•™ìŠµ ìë£Œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ O/X í€´ì¦ˆì…ë‹ˆë‹¤.</p>
                    <p style="color: var(--text-muted); font-size: 14px; margin-top: 16px;">
                        ì¢Œì¸¡ì—ì„œ ì¹´í…Œê³ ë¦¬ì™€ ë¬¸í•­ ìˆ˜ë¥¼ ì„ íƒí•œ í›„<br>"í€´ì¦ˆ ì‹œì‘" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”!
                    </p>
                </div>

                <!-- í€´ì¦ˆ ë¬¸ì œ ì˜ì—­ (JSë¡œ ë Œë”ë§) -->
                <div id="quizContainer" style="display: none;"></div>
            </div>
        </div>
    </main>

    <!-- ========================================
    ğŸ§  ìš°ì¸¡ ìŠ¤íŠœë””ì˜¤ íŒ¨ë„
    ======================================== -->
    <aside class="sidebar-right">
        <!-- í—¤ë” -->
        <div class="sidebar-right-header">
            <h3>ğŸ“ˆ í€´ì¦ˆ í†µê³„</h3>
        </div>

        <!-- í†µê³„ ì •ë³´ -->
        <div class="quiz-stats-panel">
            <div class="stat-big">
                <span class="stat-big-label">í˜„ì¬ ì ìˆ˜</span>
                <span class="stat-big-value" id="scoreDisplay">0 / 0</span>
            </div>
            <div class="stat-big" style="margin-top: 16px;">
                <span class="stat-big-label">ì •ë‹µë¥ </span>
                <span class="stat-big-value" id="accuracyDisplay">-</span>
            </div>
        </div>

        <!-- í•™ìŠµ íŒ -->
        <div class="sidebar-section" style="margin-top: 24px;">
            <h3 class="section-title" style="font-size: 13px;">ğŸ’¡ í•™ìŠµ íŒ</h3>
            <p style="font-size: 12px; color: var(--text-muted); line-height: 1.5;">
                í‹€ë¦° ë¬¸ì œëŠ” í•´ì„¤ì„ ì˜ ì½ì–´ë³´ì„¸ìš”!<br>
                ë°˜ë³µ í•™ìŠµì´ ê¸°ì–µë ¥ í–¥ìƒì— ë„ì›€ë©ë‹ˆë‹¤.
            </p>
        </div>

        <!-- ì±„íŒ…ìœ¼ë¡œ ëŒì•„ê°€ê¸° -->
        <div class="memo-section">
            <a href="/chat" class="note-btn" style="text-align: center; display: block; text-decoration: none;">
                ğŸ’¬ ì±„íŒ…ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            </a>
        </div>
    </aside>

    <!-- JavaScript ì—°ê²° -->
    <script src="{% static 'js/quiz.js' %}"></script>
    <script>
        // í…Œë§ˆ í† ê¸€ í•¨ìˆ˜
        function toggleTheme() {
            const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
            const newTheme = isDark ? 'light' : 'dark';

            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);

            updateThemeIcon(newTheme === 'dark');
        }

        // ì•„ì´ì½˜ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateThemeIcon(isDark) {
            const icon = document.getElementById('themeIcon');
            if (icon) {
                icon.innerHTML = isDark
                    ? '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>'
                    : '<circle cx="12" cy="12" r="5" /><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />';
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ í…Œë§ˆ ë³µì› ë° ì•„ì´ì½˜ ì„¤ì •
        document.addEventListener('DOMContentLoaded', function () {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeIcon(savedTheme === 'dark');
        });

        // í†µê³„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateQuizStats() {
            document.getElementById('currentQuestion').textContent =
                currentQuizData.length > 0 ? `${currentQuizIndex + 1} / ${currentQuizData.length}` : '-';
            document.getElementById('correctCount').textContent = quizScore;
            document.getElementById('scoreDisplay').textContent =
                currentQuizData.length > 0 ? `${quizScore} / ${currentQuizData.length}` : '0 / 0';

            const accuracy = currentQuizIndex > 0
                ? Math.round((quizScore / currentQuizIndex) * 100) + '%'
                : '-';
            document.getElementById('accuracyDisplay').textContent = accuracy;
        }
    </script>
</body>

</html>